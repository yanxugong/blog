(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{458:function(t,a,e){"use strict";e.r(a);var v=e(25),s=Object(v.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"「工程化」如何看待构建工具-vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#「工程化」如何看待构建工具-vite"}},[t._v("#")]),t._v(" 「工程化」如何看待构建工具 Vite？")]),t._v(" "),e("h2",{attrs:{id:"一、vite-是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、vite-是什么"}},[t._v("#")]),t._v(" 一、Vite 是什么？")]),t._v(" "),e("p",[t._v("Vite（法语意为“迅速”，发音/vit/）是一种全新的前端构建工具。你可以把它理解为一个开箱即用的"),e("strong",[t._v("开发服务器")]),t._v(" + "),e("strong",[t._v("打包工具")]),t._v("的组合，但是更轻更快。 Vite 利用浏览器原生的 ES 模块支持和用编译到原生的语言开发的工具（如 esbuild）来提供一个快速且现代的开发体验。")]),t._v(" "),e("h2",{attrs:{id:"二、vite-怎么玩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、vite-怎么玩"}},[t._v("#")]),t._v(" 二、Vite 怎么玩？")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("兼容性注意")])]),t._v(" "),e("p",[t._v("Vite 需要 Node.js 版本 >= 12.0.0。")])]),t._v(" "),e("p",[t._v("使用 NPM：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("npm init @vitejs"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("app\n")])])]),e("p",[t._v("使用 Yarn：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn init @vitejs"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("app\n")])])]),e("p",[t._v("这里我选择了默认项目名称、 "),e("code",[t._v("vue-ts")]),t._v(" 模板（这里 Vue 版本为 3.0 ），然后按照提示，下一步下一步即可，如下图：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74830bca33b74d3c84809ef1d60a7b93~tplv-k3u1fbpfcp-watermark.image",alt:"vite1.png"}})]),t._v(" "),e("p",[t._v("项目目录如下图：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8fbe78caa8f5471bb5c8e25c61dcfd6d~tplv-k3u1fbpfcp-watermark.image",alt:"vite2.png"}})]),t._v(" "),e("p",[t._v("输入指令，秒启动：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("cd vite"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("project\nnpm install\nnpm run dev\n")])])]),e("p",[t._v("大家也跑起来玩一下吧。😂")]),t._v(" "),e("h2",{attrs:{id:"三、vite-为什么快"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、vite-为什么快"}},[t._v("#")]),t._v(" 三、Vite 为什么快？")]),t._v(" "),e("h3",{attrs:{id:"_3-1-极速的服务启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-极速的服务启动"}},[t._v("#")]),t._v(" 3.1 极速的服务启动")]),t._v(" "),e("p",[t._v("Vite 使用 "),e("a",{attrs:{href:"https://esbuild.github.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("esbuild"),e("OutboundLink")],1),t._v(" 预构建"),e("strong",[t._v("依赖")]),t._v("，以原生 "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("ESM"),e("OutboundLink")],1),t._v(" 方式服务"),e("strong",[t._v("源码")]),t._v("。")]),t._v(" "),e("p",[t._v("Vite 将有许多内部模块的 ESM 依赖关系转换为单个模块，以提高后续页面加载性能。例如，我们从同一个模块引入多个单独的文件 "),e("code",[t._v("import { debounce } from 'lodash-es'")]),t._v(" 时，Vite 会通过预构建 "),e("code",[t._v("lodash-es")]),t._v("（内置模块较多） 成一个模块，"),e("strong",[t._v("避免")]),t._v("大量请求在浏览器造成"),e("strong",[t._v("网络阻塞")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/832c27e603704861ad243caaf795bd15~tplv-k3u1fbpfcp-watermark.image",alt:"2.gif"}})]),t._v(" "),e("p",[t._v("Esbuild 使用 Go 编写，比 JavaScript 编写的打包器预构建依赖快 10-100 倍。")]),t._v(" "),e("p",[t._v("Vite 只在浏览器请求源码时进行转换并"),e("strong",[t._v("按需")]),t._v("提供源码。"),e("strong",[t._v("动态导入")]),t._v("的代码，只在当前屏幕上实际使用时才会被处理。")]),t._v(" "),e("h3",{attrs:{id:"_3-2-轻量快速的热重载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-轻量快速的热重载"}},[t._v("#")]),t._v(" 3.2 轻量快速的热重载")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("注意")])]),t._v(" "),e("p",[t._v("手动 HMR API 主要用于框架和工具作者。作为最终用户，HMR 可能已经在特定于框架的启动器模板中为你处理过了。")])]),t._v(" "),e("p",[t._v("Vite 提供了一套原生 ESM 的 "),e("a",{attrs:{href:"https://cn.vitejs.dev/guide/api-hmr.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HMR API"),e("OutboundLink")],1),t._v("。 具有 HMR 功能的框架可以利用该 API 提供即时、准确的更新，而无需重新加载页面或删除应用程序状态。")]),t._v(" "),e("h2",{attrs:{id:"四、什么是-esbuild"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、什么是-esbuild"}},[t._v("#")]),t._v(" 四、什么是 esbuild？")]),t._v(" "),e("h3",{attrs:{id:"_4-1-官网描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-官网描述"}},[t._v("#")]),t._v(" 4.1 官网描述")]),t._v(" "),e("p",[t._v("一个极速 JavaScript 打包工具。")]),t._v(" "),e("h3",{attrs:{id:"_4-2-主要特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-主要特点"}},[t._v("#")]),t._v(" 4.2 主要特点")]),t._v(" "),e("ul",[e("li",[t._v("极快的速度，无需缓存")]),t._v(" "),e("li",[t._v("ES6 和 CommonJS 模块")]),t._v(" "),e("li",[t._v("ES6 模块的 Tree shaking")]),t._v(" "),e("li",[t._v("适用于 JavaScript 和 Go 的 API")]),t._v(" "),e("li",[t._v("TypeScript 和 JSX 语法")]),t._v(" "),e("li",[t._v("Source maps")]),t._v(" "),e("li",[t._v("压缩")]),t._v(" "),e("li",[t._v("Plugins")])]),t._v(" "),e("h3",{attrs:{id:"_4-3-存在的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-存在的问题"}},[t._v("#")]),t._v(" 4.3 存在的问题")]),t._v(" "),e("ul",[e("li",[t._v("调试麻烦")])]),t._v(" "),e("p",[t._v("esbuild 的核心代码是用 golang 编写，用户使用的直接是编译出来的 binary 代码和一堆 js 代码，binary 代码几乎没法断点调试，每次调试 esbuild 的代码，需要拉下代码重新编译调试，调试要求较高，难度较大。")]),t._v(" "),e("ul",[e("li",[t._v("只支持 es6")])]),t._v(" "),e("p",[t._v("目前国内大部分都仍然需要考虑 es5 场景，因此并不能将 esbuild 的产物作为最终产物，通常需要做 es6 到 es5 的转换。")]),t._v(" "),e("blockquote",[e("p",[t._v("WebAssembly 也叫 WASM，它是为基于栈的虚拟机设计的二进制指令格式，WASM 作为可移植目标，用于编译高级语言（如 C/C++/Rust），从而可以在 Web 上部署高性能客户端和服务器应用，同时它也可以在许多其它环境中使用。")])]),t._v(" "),e("blockquote",[e("p",[t._v("WebAssembly 描述了一种内存安全的沙箱执行环境，该环境甚至可以在现有 JavaScript 虚拟机内部实现。当嵌入到 Web 中时，WebAssembly 将强制执行浏览器的同源和权限安全策略。")])]),t._v(" "),e("ul",[e("li",[t._v("golang wasm 的性能相比 native 有较大的损耗，且 wasm 包体积较大，")])]),t._v(" "),e("p",[t._v("目前 golang 编译出的 wasm 性能并不是很好（相比于 native 有 3-5 倍的性能衰减），并且 go 编译出来 wasm 包体积较大( 8M+ )，不太适合一些对包体积敏感的场景（比如生产环境）。")]),t._v(" "),e("ul",[e("li",[t._v("插件机制缺失")])]),t._v(" "),e("h2",{attrs:{id:"五、未来构建工具展望"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、未来构建工具展望"}},[t._v("#")]),t._v(" 五、未来构建工具展望")]),t._v(" "),e("p",[t._v("相信玩过 Vite 的同学们都被它的"),e("strong",[t._v("首次启动秒开")]),t._v("，"),e("strong",[t._v("极速热启动")]),t._v("等等优势深深的吸引到了。个人感觉这个方向还是非常潜力的。")]),t._v(" "),e("p",[t._v("前端玩具层出不穷，敢问路在何方？")]),t._v(" "),e("p",[t._v("种一棵树最好的时间是十年前，其次是"),e("strong",[t._v("现在")]),t._v("。一起玩一玩 Vite 吧。")]),t._v(" "),e("h2",{attrs:{id:"六、感谢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、感谢"}},[t._v("#")]),t._v(" 六、感谢")]),t._v(" "),e("ul",[e("li",[t._v("如果这篇文章对你有帮助，就点个赞支持下吧！感谢阅读。")])])])}),[],!1,null,null,null);a.default=s.exports}}]);